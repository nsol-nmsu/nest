<?xml version="1.0" encoding="UTF-8"?>
<scenario compiled="true" name="sample5-mgen.xml" version="1.0" xmlns="nmfPlan" xmlns:CORE="coreSpecific">
  <network id="net0" name="net0">
    <type>ethernet</type>
    <alias domain="COREID">36487</alias>
    <member type="interface">n2/eth0</member>
    <member type="interface">n1/eth0</member>
    <member type="channel">net0/chan0</member>
    <channel id="net0/chan0" name="chan0">
      <type>ethernet</type>
      <member index="0" type="interface">n2/eth0</member>
      <member index="1" type="interface">n1/eth0</member>
    </channel>
  </network>
  <router id="n1" name="n1">
    <type domain="CORE">router</type>
    <interface id="n1/eth0" name="eth0">
      <member index="1" type="channel">net0/chan0</member>
      <member type="network">net0</member>
      <address type="mac">00:00:00:aa:00:29</address>
      <address type="IPv4">10.0.0.2/24</address>
      <address type="IPv6">a::2/64</address>
    </interface>
    <alias domain="COREID">1</alias>
    <point lat="47.577535873" lon="-122.126125647" type="gps"/>
    <CORE:services name="n1">
      <service name="zebra" startup_idx="35"/>
      <service name="OSPFv2" startup_idx="40"/>
      <service name="OSPFv3" startup_idx="40"/>
      <service name="vtysh" startup_idx="45"/>
      <service name="IPForward" startup_idx="5"/>
      <service custom="True" name="UserDefined" startup_idx="35">
        <file name="mgen.sh">
#!/bin/sh
SCRIPTDIR=$SESSION_DIR
LOGDIR=/var/log
if [ `uname` = &quot;Linux&quot; ]; then
  cd $SCRIPTDIR
else
  cd /tmp/e0_`hostname`
fi
(
cat &lt;&lt; 'EOF'
# mgen receiver script
15.0 LISTEN UDP 5001
EOF
) &gt; recv.mgn
mgen input recv.mgn output $LOGDIR/mgen.log &gt; /dev/null 2&gt; /dev/null &lt; /dev/null &amp;</file>
        <command type="start">sh mgen.sh</command>
      </service>
    </CORE:services>
  </router>
  <router id="n2" name="n2">
    <type domain="CORE">router</type>
    <interface id="n2/eth0" name="eth0">
      <member index="0" type="channel">net0/chan0</member>
      <member type="network">net0</member>
      <address type="mac">00:00:00:aa:00:28</address>
      <address type="IPv4">10.0.0.1/24</address>
      <address type="IPv6">a::1/64</address>
    </interface>
    <alias domain="COREID">2</alias>
    <point lat="47.578543912" lon="-122.13089609" type="gps"/>
    <CORE:services name="n2">
      <service name="zebra" startup_idx="35"/>
      <service name="OSPFv2" startup_idx="40"/>
      <service name="OSPFv3" startup_idx="40"/>
      <service name="vtysh" startup_idx="45"/>
      <service name="IPForward" startup_idx="5"/>
      <service custom="True" name="UserDefined" startup_idx="35">
        <file name="mgen.sh">
#!/bin/sh
HN=`hostname`
SCRIPTDIR=$SESSION_DIR
LOGDIR=/var/log

if [ `uname` = &quot;FreeBSD&quot; ]; then
  SCRIPTDIR=/tmp/e0_$HN
  LOGDIR=$SCRIPTDIR
fi
cd $SCRIPTDIR
(
cat &lt;&lt; 'EOF'
# mgen sender script: send UDP traffic to UDP port 5001 after 15 seconds
15.0 ON 1 UDP SRC 5000 DST 10.0.0.2/5001 PERIODIC [1 4096]
EOF
) &gt; send_$HN.mgn
mgen input send_$HN.mgn output $LOGDIR/mgen_$HN.log &gt; /dev/null 2&gt; /dev/null &lt; /dev/null &amp;</file>
        <command type="start">sh mgen.sh</command>
      </service>
    </CORE:services>
  </router>
  <CORE:defaultservices>
    <device type="router">
      <service name="zebra"/>
      <service name="OSPFv2"/>
      <service name="OSPFv3"/>
      <service name="vtysh"/>
      <service name="IPForward"/>
    </device>
  </CORE:defaultservices>
  <CORE:sessionconfig>
    <origin alt="2.0" lat="47.5791667" lon="-122.132322" scale100="150.0"/>
    <metadata>
      <parameter name="global_options">interface_names=no ip_addresses=yes ipv6_addresses=yes node_labels=yes link_labels=yes show_api=no background_images=no annotations=yes grid=yes traffic_start=0</parameter>
      <parameter name="canvas c1">{name {Canvas1}}</parameter>
    </metadata>
  </CORE:sessionconfig>
</scenario>
