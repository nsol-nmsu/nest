<?xml version="1.0" encoding="UTF-8"?>
<scenario compiled="true" name="john-simple-udp.xml" version="1.0" xmlns="nmfPlan" xmlns:CORE="coreSpecific">
  <network id="wlan16" name="wlan16">
    <point lat="47.5785302254" lon="-122.123775332" type="gps"/>
    <type>wireless</type>
    <alias domain="COREID">16</alias>
    <member type="interface">n1/eth0</member>
    <member type="interface">n2/eth0</member>
    <member type="channel">wlan16/wireless</member>
    <channel id="wlan16/wireless" name="wireless">
      <type domain="CORE">basic_range</type>
      <parameter name="range">275</parameter>
      <parameter name="bandwidth">54000000</parameter>
      <parameter name="jitter">0</parameter>
      <parameter name="delay">20000</parameter>
      <parameter name="error">0</parameter>
      <member index="0" type="interface">n1/eth0</member>
      <member index="1" type="interface">n2/eth0</member>
    </channel>
  </network>
  <network id="net0" name="net0">
    <type>ethernet</type>
    <alias domain="COREID">10032</alias>
    <member type="interface">n3/eth0</member>
    <member type="interface">n4/eth0</member>
    <member type="channel">net0/chan0</member>
    <channel id="net0/chan0" name="chan0">
      <type>ethernet</type>
      <member index="0" type="interface">n3/eth0</member>
      <member index="1" type="interface">n4/eth0</member>
    </channel>
  </network>
  <router id="n3" name="n3">
    <type domain="CORE">router</type>
    <interface id="n3/eth0" name="eth0">
      <member index="0" type="channel">net0/chan0</member>
      <member type="network">net0</member>
      <address type="mac">00:00:00:aa:00:16</address>
      <address type="IPv4">10.0.1.1/24</address>
      <address type="IPv6">2001:1::1/64</address>
    </interface>
    <alias domain="COREID">1</alias>
    <point lat="47.5730185561" lon="-122.126679478" type="gps"/>
    <CORE:services name="n3">
      <service name="zebra" startup_idx="35"/>
      <service name="OSPFv2" startup_idx="40"/>
      <service name="OSPFv3" startup_idx="40"/>
      <service name="vtysh" startup_idx="45"/>
      <service name="IPForward" startup_idx="5"/>
      <service custom="True" name="pcap" startup_idx="1">
        <file name="pcap.sh">

#!/bin/sh
# set tcpdump options here (see 'man tcpdump' for help)
# (-s snap length, -C limit pcap file length, -n disable name resolution)
DUMPOPTS=&quot;-s 12288 -C 10 -n&quot;

if [ &quot;x$1&quot; = &quot;xstart&quot; ]; then

tcpdump ${DUMPOPTS} -w n3.eth0.pcap -i eth0 &lt; /dev/null &amp;

pid=$!
sleep 10.0s
kill $pid

elif [ &quot;x$1&quot; = &quot;xstop&quot; ]; then
    mkdir -p /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
    mv *.pcap /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
fi;</file>
        <command type="start">sh pcap.sh start</command>
        <command type="stop">sh pcap.sh stop</command>
        <command type="validate">pidof tcpdump</command>
      </service>
    </CORE:services>
  </router>
  <router id="n4" name="n4">
    <type domain="CORE">router</type>
    <interface id="n4/eth0" name="eth0">
      <member index="1" type="channel">net0/chan0</member>
      <member type="network">net0</member>
      <address type="mac">00:00:00:aa:00:17</address>
      <address type="IPv4">10.0.1.2/24</address>
      <address type="IPv6">2001:1::2/64</address>
    </interface>
    <alias domain="COREID">2</alias>
    <point lat="47.5729982564" lon="-122.122252106" type="gps"/>
    <CORE:services name="n4">
      <service name="zebra" startup_idx="35"/>
      <service name="OSPFv2" startup_idx="40"/>
      <service name="OSPFv3" startup_idx="40"/>
      <service name="vtysh" startup_idx="45"/>
      <service name="IPForward" startup_idx="5"/>
      <service custom="True" name="pcap" startup_idx="1">
        <file name="pcap.sh">

#!/bin/sh
# set tcpdump options here (see 'man tcpdump' for help)
# (-s snap length, -C limit pcap file length, -n disable name resolution)
DUMPOPTS=&quot;-s 12288 -C 10 -n&quot;

if [ &quot;x$1&quot; = &quot;xstart&quot; ]; then

tcpdump ${DUMPOPTS} -w n4.eth0.pcap -i eth0 &lt; /dev/null &amp;

pid=$!
sleep 10.0s
kill $pid

elif [ &quot;x$1&quot; = &quot;xstop&quot; ]; then
    mkdir -p /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
    mv *.pcap /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
fi;
</file>
        <command type="start">sh pcap.sh start</command>
        <command type="stop">sh pcap.sh stop</command>
        <command type="validate">pidof tcpdump</command>
      </service>
    </CORE:services>
  </router>
  <router id="n1" name="n1">
    <type domain="CORE">router</type>
    <interface id="n1/eth0" name="eth0">
      <member index="0" type="channel">wlan16/wireless</member>
      <member type="network">wlan16</member>
      <address type="mac">00:00:00:aa:00:14</address>
      <address type="IPv4">10.0.0.1/24</address>
      <address type="IPv6">2001::1/128</address>
    </interface>
    <alias domain="COREID">4</alias>
    <point lat="47.5766933814" lon="-122.125381716" type="gps"/>
    <CORE:services name="n1">
      <service name="zebra" startup_idx="35"/>
      <service name="OSPFv2" startup_idx="40"/>
      <service name="OSPFv3" startup_idx="40"/>
      <service name="vtysh" startup_idx="45"/>
      <service name="IPForward" startup_idx="5"/>
      <service custom="True" name="pcap" startup_idx="1">
        <file name="pcap.sh">

#!/bin/sh
# set tcpdump options here (see 'man tcpdump' for help)
# (-s snap length, -C limit pcap file length, -n disable name resolution)
DUMPOPTS=&quot;-s 12288 -C 10 -n&quot;

if [ &quot;x$1&quot; = &quot;xstart&quot; ]; then

tcpdump ${DUMPOPTS} -w n1.eth0.pcap -i eth0 &lt; /dev/null &amp;

pid=$!
sleep 10.0s
kill $pid

elif [ &quot;x$1&quot; = &quot;xstop&quot; ]; then
    mkdir -p /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
    mv *.pcap /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
fi;
</file>
        <command type="start">sh pcap.sh start</command>
        <command type="stop">sh pcap.sh stop</command>
        <command type="validate">pidof tcpdump</command>
      </service>
    </CORE:services>
  </router>
  <router id="n2" name="n2">
    <type domain="CORE">router</type>
    <interface id="n2/eth0" name="eth0">
      <member index="1" type="channel">wlan16/wireless</member>
      <member type="network">wlan16</member>
      <address type="mac">00:00:00:aa:00:15</address>
      <address type="IPv4">10.0.0.2/24</address>
      <address type="IPv6">2001::2/128</address>
    </interface>
    <alias domain="COREID">5</alias>
    <point lat="47.5766697673" lon="-122.122290475" type="gps"/>
    <CORE:services name="n2">
      <service name="zebra" startup_idx="35"/>
      <service name="OSPFv2" startup_idx="40"/>
      <service name="OSPFv3" startup_idx="40"/>
      <service name="vtysh" startup_idx="45"/>
      <service name="IPForward" startup_idx="5"/>
      <service custom="True" name="pcap" startup_idx="1">
        <file name="pcap.sh">

#!/bin/sh
# set tcpdump options here (see 'man tcpdump' for help)
# (-s snap length, -C limit pcap file length, -n disable name resolution)
DUMPOPTS=&quot;-s 12288 -C 10 -n&quot;

if [ &quot;x$1&quot; = &quot;xstart&quot; ]; then

tcpdump ${DUMPOPTS} -w n2.eth0.pcap -i eth0 &lt; /dev/null &amp;

pid=$!
sleep 10.0s
kill $pid

elif [ &quot;x$1&quot; = &quot;xstop&quot; ]; then
    mkdir -p /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
    mv *.pcap /home/john/ns-3.25/ns-3.25/imn2ns3/pcap-files/john-simple-udp/core/
fi;

</file>
        <command type="start">sh pcap.sh start</command>
        <command type="stop">sh pcap.sh stop</command>
        <command type="validate">pidof tcpdump</command>
      </service>
    </CORE:services>
  </router>
  <CORE:defaultservices>
    <device type="router">
      <service name="zebra"/>
      <service name="OSPFv2"/>
      <service name="OSPFv3"/>
      <service name="vtysh"/>
      <service name="IPForward"/>
    </device>
  </CORE:defaultservices>
  <CORE:sessionconfig>
    <origin alt="2.0" lat="47.5791667" lon="-122.132322" scale100="150.0"/>
    <metadata>
      <parameter name="global_options">interface_names=no ip_addresses=yes ipv6_addresses=yes node_labels=yes link_labels=yes show_api=no background_images=no annotations=yes grid=yes traffic_start=1</parameter>
      <parameter name="canvas c1">{name {Canvas1}}</parameter>
    </metadata>
  </CORE:sessionconfig>
</scenario>
